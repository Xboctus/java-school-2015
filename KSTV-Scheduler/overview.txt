1) Изначально приложение стартует в режиме оффлайн - не подключено ни к какому серверу.
2) В отдельном диалоге пользователь может инициировать подключение к серверу, указав его адрес, а также свой логин и пароль на нём. Диалог подключения служит также и для регистрации.
3) Приложение (клиент) пытается подключиться к указанному серверу по заданной паре логин-пароль. Кроме них оно также передает номер заранее зарезервированного порта для прослушки событий.
4) Сервер пытается аутентифицировать пользователя.
5) В случае ошибки аутентификации сервер сообщает о ней, соединение завершается, клиент остаётся в режиме оффлайн.
6) В случае успеха сервер сообщает об этом, соединение сохраняется, клиент переходит в режим онлайн на этом сервере. Кроме этого сервер устанавливает дополнительное соединение с клиентом по указанному им порту для прослушки событий.
7) Клиент и сервер обмениваются запросами: клиент сообщает о действиях пользователя по основному соединению (логин и пароль не нужны), сервер - о событиях по дополнительному соединению.
8) По указанию пользователя клиент может отключиться от сервера и перейти в режим оффлайн.
9) При закрытии приложения клиент автоматически отключается от сервера.
